[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile.postgresql"

[deploy]
startCommand = "node railway-postgresql-start.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
healthcheckPath = "/health"
healthcheckTimeout = 300
healthcheckInterval = 30000

[variables]
# Force PostgreSQL usage
FORCE_POSTGRESQL = "true"
DISABLE_SQLITE_FALLBACK = "true"

# PostgreSQL pool configuration
PGPOOL_MIN = "2"
PGPOOL_MAX = "20"
PGTIMEOUT = "30000"

# Application settings
NODE_ENV = "production"
PORT = "3000"

# Ensure DATABASE_URL is required
# This will be provided by Railway PostgreSQL service